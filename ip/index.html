<html>
  <head>
  </head>
  
  <body>
    <canvas id="canvas" width="1240px" height="480px">
    </canvas>
  </body>
</html>

<script src="ip_cs.js"></script>
<script src="ip_core.js"></script>
<script src="ip_mask.js"></script>
<script src="ip_p.js"></script>

<script>
  console.log("hello");
  
  var img = new Image;
  img.src = "../album.png";
  img.onload = function(){
    var canvas = document.getElementById("canvas");
    var dc = canvas.getContext("2d");
    
    ip_set_dc( dc );
    
    dc.drawImage( img, 0,0,300,300 );
    
    var pixels = dc.getImageData(0,0,300,300);
    var pixels2 = ip_copy_img( pixels );
    
    ip_set_roi( pixels, 50,50,200,200 )
    ip_darken( pixels, 100 );
    
    ip_set_roi( pixels, 100,100,100,100 );
    ip_lighten( pixels, 150 );
    
    ip_set_channel_mask( pixels2, IP_G, 0,0 );
    ip_set_channel_mask( pixels2, IP_B, 0,0 );
    ip_lighten( pixels2, 50 );
    
    //ip_reset_masks( pixels2 );
    var cont = ip_contour_4x( pixels2, 150 );
    console.log(cont);
    
    dc.putImageData( pixels,300,0 );
    dc.putImageData( pixels2, 600,0 );
    dc.putImageData( cont, 900,0 );
  }
</script>
